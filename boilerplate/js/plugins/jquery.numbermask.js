(function(e){e.fn.numberMask=function(t){var n={type:"int",beforePoint:10,afterPoint:2,defaultValueInput:0,decimalMark:["."],pattern:""},r=function(e){var t=e.which;if(e.ctrlKey||e.altKey||e.metaKey||t<32){return true}else if(t){var r=String.fromCharCode(t);var i=e.target.value;var s=o(e.target);if(s.statusSelection){i=i.substring(0,s.start)+r+i.substring(s.end)}else{i+=r}if(typeof n.pattern=="object"&&n.pattern instanceof RegExp){var u=n.pattern}else{if(n.type=="int"){var u=new RegExp("^\\d{1,"+n.beforePoint+"}$","ig")}else if(n.type=="float"){var u=new RegExp("^\\d{1,"+n.beforePoint+"}$|^\\d{1,"+n.beforePoint+"}"+f()+"\\d{0,"+n.afterPoint+"}$","ig")}}return u.test(i)}},s=function(t){var n=e(t.target);if(t.which==13||t.which==86){n.val(a(n))}},o=function(e){var t=0,n=0,r,i,s,o,u,a=false;if(typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"){t=e.selectionStart;n=e.selectionEnd}else{i=document.selection.createRange();if(i&&i.parentElement()==e){o=e.value.length;r=e.value.replace(/\r\n/g,"\n");s=e.createTextRange();s.moveToBookmark(i.getBookmark());u=e.createTextRange();u.collapse(false);if(s.compareEndPoints("StartToEnd",u)>-1){t=n=o}else{t=-s.moveStart("character",-o);t+=r.slice(0,t).split("\n").length-1;if(s.compareEndPoints("EndToEnd",u)>-1){n=o}else{n=-s.moveEnd("character",-o);n+=r.slice(0,n).split("\n").length-1}}}}if(t-n!=0){a=true}return{start:t,end:n,statusSelection:a}},u=function(t){var n=e(t.target);if(n.val()!=""){n.val(a(n))}},a=function(e){var t=e.val();if(typeof n.pattern=="object"&&n.pattern instanceof RegExp){var r=n.pattern;if(r.test(t)){return t}else{return n.defaultValueInput}}else{if(n.type=="int"){var r=new RegExp("^\\d{1,"+n.beforePoint+"}$","ig");if(r.test(t)){return t}else{return n.defaultValueInput}}else{var r=new RegExp("^\\d{1,"+n.beforePoint+"}$|^\\d{1,"+n.beforePoint+"}"+f()+"\\d{1,"+n.afterPoint+"}$","ig");if(r.test(t)){return t}else{return n.defaultValueInput}}}},f=function(){var e="(\\"+n.decimalMark[0];for(i=1;i<n.decimalMark.length;i++){e+="|\\"+n.decimalMark[i]}e+=")";return e};this.bind("keypress",r).bind("keyup",s).bind("blur",u);if(t){if(t.decimalMark){if(e.type(t.decimalMark)==="string")t.decimalMark=[t.decimalMark]}e.extend(n,t)}return this}})(jQuery)
